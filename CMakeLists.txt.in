cmake_minimum_required(VERSION 3.10)

include(ExternalProject)


ExternalProject_Add(gnuplot-iostream
  GIT_REPOSITORY    https://github.com/dstahlke/gnuplot-iostream.git
  GIT_TAG           3a8c001a38304d7bfebb9edf91df5be8e3deaa57
  SOURCE_DIR        "${CMAKE_CURRENT_BINARY_DIR}/gnuplot-iostream-src"
  BINARY_DIR        ""
  CONFIGURE_COMMAND ""
  BUILD_COMMAND     ""
  INSTALL_COMMAND   ""
  TEST_COMMAND      ""
)

include_directories(${CMAKE_CURRENT_BINARY_DIR}/gnuplot-iostream-src)


ExternalProject_Add(pcm
  GIT_REPOSITORY    https://github.com/opcm/pcm.git
  GIT_TAG           202107
  SOURCE_DIR        "${CMAKE_CURRENT_BINARY_DIR}/pcm-src"
  BINARY_DIR        "${CMAKE_CURRENT_BINARY_DIR}/pcm-src"
  CONFIGURE_COMMAND ""
  UPDATE_COMMAND    git checkout Makefile
  PATCH_COMMAND     git apply ${CMAKE_CURRENT_LIST_DIR}/dont_use_perf_in_pcm.patch
  BUILD_COMMAND     make lib
  INSTALL_COMMAND   ""
  TEST_COMMAND      ""
)

include_directories(${CMAKE_CURRENT_BINARY_DIR}/pcm-src)
